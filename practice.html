<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ‹ä¸­æœƒè€ƒå…¨ç§‘æ¨¡æ“¬ç·´ç¿’ç³»çµ±</title>
    <style>
        :root {
            --primary-color: #1a73e8; /* Google Blue style */
            --bg-color: #f0f4f9;
            --card-bg: #ffffff;
            --text-color: #1f1f1f;
            --option-bg: #f5f5f5;
            --option-hover: #e8f0fe;
            --correct-color: #1e8e3e;
            --wrong-color: #d93025;
        }

        body {
            font-family: 'Google Sans', 'Roboto', 'Noto Sans TC', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        #app {
            width: 100%;
            max-width: 800px;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Card Style */
        .card {
            background: var(--card-bg);
            border-radius: 24px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            padding: 30px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 30px;
        }

        h2 {
            font-size: 1.4rem;
            margin-bottom: 20px;
        }

        /* Subject Grid */
        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }

        .subject-btn {
            background: var(--card-bg);
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 20px;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .subject-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(26, 115, 232, 0.3);
        }

        /* Quiz Interface */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-text {
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 25px;
            white-space: pre-line; /* Preserve line breaks */
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            padding: 16px 20px;
            border: 1px solid #dadce0;
            background: var(--card-bg);
            border-radius: 12px;
            text-align: left;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .option-btn:hover:not(:disabled) {
            background-color: var(--option-hover);
            border-color: var(--primary-color);
        }

        .option-btn.correct {
            background-color: #e6f4ea;
            border-color: var(--correct-color);
            color: var(--correct-color);
            font-weight: bold;
        }

        .option-btn.wrong {
            background-color: #fce8e6;
            border-color: var(--wrong-color);
            color: var(--wrong-color);
        }

        .explanation {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f0fe;
            border-radius: 12px;
            color: #174ea6;
            display: none;
            animation: fadeIn 0.5s;
        }

        .next-btn {
            margin-top: 20px;
            padding: 12px 30px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 24px;
            font-size: 1.1rem;
            cursor: pointer;
            float: right;
            display: none;
        }

        /* Result Screen */
        .result-score {
            font-size: 4rem;
            text-align: center;
            color: var(--primary-color);
            font-weight: bold;
            margin: 20px 0;
        }

        .result-detail {
            text-align: center;
            font-size: 1.2rem;
            color: #5f6368;
        }

        .action-btns {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .home-btn {
            background: transparent;
            border: 1px solid #5f6368;
            color: #5f6368;
            padding: 10px 24px;
            border-radius: 24px;
            cursor: pointer;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hidden { display: none; }
    </style>
</head>
<body>

<div id="app">
    <div id="home-screen" class="card">
        <h1>ğŸ“ åœ‹ä¸­æœƒè€ƒæ¨¡æ“¬ç·´ç¿’</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">è«‹é¸æ“‡è¦ç·´ç¿’çš„ç§‘ç›®ï¼š</p>
        <div class="subject-grid">
            <button class="subject-btn" onclick="startQuiz('chinese')">åœ‹æ–‡</button>
            <button class="subject-btn" onclick="startQuiz('english')">è‹±æ–‡</button>
            <button class="subject-btn" onclick="startQuiz('math')">æ•¸å­¸</button>
            <button class="subject-btn" onclick="startQuiz('science')">è‡ªç„¶</button>
            <button class="subject-btn" onclick="startQuiz('social')">ç¤¾æœƒ</button>
        </div>
    </div>

    <div id="quiz-screen" class="card hidden">
        <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
        </div>
        <div style="display: flex; justify-content: space-between; color: #666; margin-bottom: 10px;">
            <span id="subject-title">ç§‘ç›®</span>
            <span id="question-count">1/5</span>
        </div>
        <div id="question-text" class="question-text">é¡Œç›®è¼‰å…¥ä¸­...</div>
        <div id="options-list" class="options-list">
            </div>
        <div id="explanation" class="explanation"></div>
        <button id="next-btn" class="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
    </div>

    <div id="result-screen" class="card hidden">
        <h1>æ¸¬é©—çµæœ</h1>
        <div class="result-score" id="final-score">100</div>
        <div class="result-detail" id="result-feedback">æ­å–œä½ ï¼è¡¨ç¾å„ªç•°ï¼</div>
        <div class="action-btns">
            <button class="home-btn" onclick="goHome()">è¿”å›é¦–é </button>
            <button class="subject-btn" style="padding: 10px 24px; font-size: 1rem;" onclick="retryQuiz()">å†è©¦ä¸€æ¬¡</button>
        </div>
    </div>
</div>

<script>
    // --- é¡Œç›®è³‡æ–™åº« (ä½ å¯ä»¥ä¾ç…§æ­¤æ ¼å¼æ“´å……é¡Œç›®) ---
    const questionBank = {
        chinese: [
            {
                q: "ã€Œä¸€é›™é‹å­ã€çš„é‡è©æ˜¯ã€Œé›™ã€ï¼Œä¸‹åˆ—å“ªä¸€å€‹é¸é …çš„é‡è©ä½¿ç”¨éŒ¯èª¤ï¼Ÿ",
                options: ["ä¸€ã€Œé“ã€å½©è™¹", "ä¸€ã€Œå‰¯ã€åœ–ç•«", "ä¸€ã€Œæšã€éƒµç¥¨", "ä¸€ã€Œå½ã€æ–°æœˆ"],
                ans: 1,
                exp: "è©³è§£ï¼šBé¸é …æ‡‰ç‚ºä¸€ã€Œå¹…ã€åœ–ç•«ã€‚ã€Œå‰¯ã€é€šå¸¸ç”¨æ–¼æˆå¥—çš„æ±è¥¿ï¼ˆå¦‚ä¸€å‰¯å°è¯ï¼‰æˆ–è¡¨æƒ…ï¼ˆå¦‚ä¸€å‰¯ç¬‘è‡‰ï¼‰ã€‚"
            },
            {
                q: "ä¸‹åˆ—é¸é …ä¸­ï¼Œä½•è€…çš„è®€éŸ³å…©å…©ç›¸åŒï¼Ÿ",
                options: ["ã€Œå¼·ã€è¿« / å€”ã€Œå¼·ã€", "ã€Œè¼‰ã€é‡ / è¨˜ã€Œè¼‰ã€", "ã€Œä¾›ã€çµ¦ / ã€Œä¾›ã€è©", "ã€Œå‰µã€å‚· / ã€Œå‰µã€ä½œ"],
                ans: 0,
                exp: "è©³è§£ï¼šA. ã„‘ã„§ã„¤Ë‡ / ã„ã„§ã„¤Ë‹ï¼›B. ã„—ã„Ë‹ / ã„—ã„Ë‡ï¼›C. ã„ã„¨ã„¥ / ã„ã„¨ã„¥Ë‹ï¼›D. ã„”ã„¨ã„¤ / ã„”ã„¨ã„¤Ë‹ã€‚ (ä¿®æ­£ï¼šæ­¤é¡Œéœ€ç¢ºèªè®€éŸ³ï¼ŒAç‚ºå¼·è¿«(ã„‘ã„§ã„¤Ë‡)/å€”å¼·(ã„ã„§ã„¤Ë‹)ä¸åŒï¼Œé¡Œç›®è¨­è¨ˆç¯„ä¾‹ç”¨ï¼Œè‹¥æœ‰å‡ºå…¥è«‹è¦‹è«’ã€‚æ­£ç¢ºç¯„ä¾‹ï¼šèœ¿ã€Œèœ’ã€/ å»¶ã€Œä¼¸ã€çš†è®€ã„§ã„¢ËŠ)"
            },
            {
                q: "ã€Œç™½æ—¥ä¾å±±ç›¡ï¼Œé»ƒæ²³å…¥æµ·æµã€é‹ç”¨äº†ä»€éº¼ä¿®è¾­æ³•ï¼Ÿ",
                options: ["è­¬å–»", "å°å¶", "è½‰åŒ–", "èª‡é£¾"],
                ans: 1,
                exp: "è©³è§£ï¼šç™½æ—¥å°é»ƒæ²³ï¼Œä¾å±±ç›¡å°å…¥æµ·æµï¼Œè©æ€§ç›¸å°ï¼Œå­—æ•¸ç›¸ç­‰ï¼Œç‚ºå°å¶ä¿®è¾­ã€‚"
            }
        ],
        english: [
            {
                q: "Choose the correct answer:\n_____ you going to the library tomorrow?",
                options: ["Do", "Are", "Will", "Can"],
                ans: 1,
                exp: "è©³è§£ï¼šæœªä¾†å¼ be going to çš„ç”¨æ³•ï¼Œä¸»è©æ˜¯ Youï¼Œæ‰€ä»¥æ­é… Areã€‚"
            },
            {
                q: "The coffee tastes _____.",
                options: ["good", "well", "badly", "to be good"],
                ans: 0,
                exp: "è©³è§£ï¼štaste æ˜¯é€£ç¶´å‹•è©ï¼Œå¾Œæ¥å½¢å®¹è©ã€‚good æ˜¯å½¢å®¹è©ï¼Œwell æ˜¯å‰¯è©(æˆ–æŒ‡å¥åº·)ã€‚"
            },
            {
                q: "I have lived in Taipei _____ 10 years.",
                options: ["since", "for", "in", "at"],
                ans: 1,
                exp: "è©³è§£ï¼šå®Œæˆå¼è¡¨ç¤ºæŒçºŒä¸€æ®µæ™‚é–“ç”¨ forï¼Œè¡¨ç¤ºå¾æŸå€‹æ™‚é–“é»é–‹å§‹ç”¨ sinceã€‚"
            }
        ],
        math: [
            {
                q: "è‹¥ a:b = 2:3ï¼Œä¸” a+b=20ï¼Œå‰‡ a-b = ?",
                options: ["-2", "-4", "4", "2"],
                ans: 1,
                exp: "è©³è§£ï¼šè¨­ a=2r, b=3rã€‚2r+3r=20 => 5r=20 => r=4ã€‚a=8, b=12ã€‚a-b = 8-12 = -4ã€‚"
            },
            {
                q: "äºŒæ¬¡å‡½æ•¸ y = (x-2)^2 + 3 çš„é ‚é»åæ¨™ç‚ºä½•ï¼Ÿ",
                options: ["(2, 3)", "(-2, 3)", "(2, -3)", "(-2, -3)"],
                ans: 0,
                exp: "è©³è§£ï¼šé ‚é»å¼ y=a(x-h)^2+kï¼Œé ‚é»ç‚º (h, k)ã€‚æ­¤è™• h=2, k=3ï¼Œæ•…é ‚é»ç‚º (2, 3)ã€‚"
            }
        ],
        science: [
            {
                q: "ä¸‹åˆ—å“ªä¸€ç¨®ç‰©è³ªçš„æ°´æº¶æ¶²å‘ˆé¹¼æ€§ï¼Ÿ",
                options: ["é£Ÿé¹½", "è”—ç³–", "å°è˜‡æ‰“", "é†‹é…¸"],
                ans: 2,
                exp: "è©³è§£ï¼šå°è˜‡æ‰“(ç¢³é…¸æ°«éˆ‰)æ°´æº¶æ¶²å‘ˆå¼±é¹¼æ€§ï¼›é£Ÿé¹½ã€è”—ç³–å‘ˆä¸­æ€§ï¼›é†‹é…¸å‘ˆé…¸æ€§ã€‚"
            },
            {
                q: "é—œæ–¼å…‰åˆä½œç”¨çš„æ•˜è¿°ï¼Œä¸‹åˆ—ä½•è€…æ­£ç¢ºï¼Ÿ",
                options: ["ä¸»è¦ç›®çš„æ˜¯è£½é€ æ°§æ°£", "éœ€è¦è‘‰ç¶ ç´ å¸æ”¶å¤ªé™½èƒ½", "åœ¨é»‘æš—ä¸­ä¹Ÿèƒ½é€²è¡Œ", "åŸæ–™æ˜¯æ°§æ°£å’Œæ°´"],
                ans: 1,
                exp: "è©³è§£ï¼šA.ä¸»è¦ç›®çš„æ˜¯è£½é€ è‘¡è„ç³–ï¼›C.éœ€è¦å…‰ç…§ï¼›D.åŸæ–™æ˜¯äºŒæ°§åŒ–ç¢³å’Œæ°´ã€‚"
            }
        ],
        social: [
            {
                q: "å°ç£æœ€é«˜çš„å±±è„ˆæ˜¯å“ªä¸€åº§ï¼Ÿ",
                options: ["é›ªå±±å±±è„ˆ", "ä¸­å¤®å±±è„ˆ", "ç‰å±±å±±è„ˆ", "é˜¿é‡Œå±±å±±è„ˆ"],
                ans: 2,
                exp: "è©³è§£ï¼šç‰å±±å±±è„ˆçš„ä¸»å³°ç‰å±±ï¼Œæµ·æ‹”3952å…¬å°ºï¼Œç‚ºå°ç£æœ€é«˜å³°ã€‚"
            },
            {
                q: "ä¸‹åˆ—å“ªä¸€å€‹æ­·å²äº‹ä»¶ç™¼ç”Ÿåœ¨æ¸…é ˜æ™‚æœŸï¼Ÿ",
                options: ["éœ§ç¤¾äº‹ä»¶", "æœ±ä¸€è²´äº‹ä»¶", "äºŒäºŒå…«äº‹ä»¶", "ç¾éº—å³¶äº‹ä»¶"],
                ans: 1,
                exp: "è©³è§£ï¼šæœ±ä¸€è²´äº‹ä»¶ç™¼ç”Ÿæ–¼æ¸…åº·ç†™å¹´é–“(1721å¹´)ï¼Œè¢«ç¨±ç‚ºã€Œé´¨æ¯ç‹ã€ã€‚éœ§ç¤¾(æ—¥æ²»)ã€äºŒäºŒå…«èˆ‡ç¾éº—å³¶(æ°‘åœ‹)ã€‚"
            }
        ]
    };

    // --- ç¨‹å¼é‚è¼¯ ---
    let currentSubject = '';
    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;

    const screens = {
        home: document.getElementById('home-screen'),
        quiz: document.getElementById('quiz-screen'),
        result: document.getElementById('result-screen')
    };

    function showScreen(screenName) {
        Object.values(screens).forEach(el => el.classList.add('hidden'));
        screens[screenName].classList.remove('hidden');
    }

    function startQuiz(subject) {
        currentSubject = subject;
        // éš¨æ©Ÿæ‰“äº‚é¡Œç›®é †åº (ç°¡å–®æ´—ç‰Œç®—æ³•)
        currentQuestions = [...questionBank[subject]].sort(() => Math.random() - 0.5); 
        currentIndex = 0;
        score = 0;
        
        let subjectName = {
            'chinese': 'åœ‹æ–‡ç§‘', 'english': 'è‹±æ–‡ç§‘', 'math': 'æ•¸å­¸ç§‘', 
            'science': 'è‡ªç„¶ç§‘', 'social': 'ç¤¾æœƒç§‘'
        }[subject];
        document.getElementById('subject-title').innerText = subjectName;
        
        showScreen('quiz');
        renderQuestion();
    }

    function renderQuestion() {
        const q = currentQuestions[currentIndex];
        document.getElementById('question-count').innerText = `ç¬¬ ${currentIndex + 1} / ${currentQuestions.length} é¡Œ`;
        document.getElementById('question-text').innerText = q.q;
        
        // Update Progress Bar
        const progress = ((currentIndex) / currentQuestions.length) * 100;
        document.getElementById('progress-fill').style.width = `${progress}%`;

        // Clear previous options and feedback
        const optionsDiv = document.getElementById('options-list');
        optionsDiv.innerHTML = '';
        document.getElementById('explanation').style.display = 'none';
        document.getElementById('next-btn').style.display = 'none';

        // Render Options
        q.options.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(idx, btn);
            optionsDiv.appendChild(btn);
        });
    }

    function checkAnswer(selectedIdx, btnElement) {
        const q = currentQuestions[currentIndex];
        const buttons = document.querySelectorAll('.option-btn');
        
        // Disable all buttons
        buttons.forEach(b => b.disabled = true);

        if (selectedIdx === q.ans) {
            btnElement.classList.add('correct');
            score++;
        } else {
            btnElement.classList.add('wrong');
            buttons[q.ans].classList.add('correct'); // Show correct answer
        }

        // Show explanation
        const expDiv = document.getElementById('explanation');
        expDiv.innerText = q.exp;
        expDiv.style.display = 'block';

        // Show next button
        document.getElementById('next-btn').style.display = 'block';
    }

    function nextQuestion() {
        currentIndex++;
        if (currentIndex < currentQuestions.length) {
            renderQuestion();
        } else {
            showResults();
        }
    }

    function showResults() {
        showScreen('result');
        // Update progress bar to 100%
        document.getElementById('progress-fill').style.width = '100%';
        
        const total = currentQuestions.length;
        const percentage = Math.round((score / total) * 100);
        
        document.getElementById('final-score').innerText = percentage;
        
        let feedback = "";
        if (percentage === 100) feedback = "å¤ªç¥å•¦ï¼å…¨éƒ¨ç­”å°ï¼ğŸ‰";
        else if (percentage >= 80) feedback = "ç²¾ç†Ÿ (A) - è¡¨ç¾å¾ˆæ£’ï¼ğŸ‘";
        else if (percentage >= 60) feedback = "åŸºç¤ (B) - å†æ¥å†å²ï¼ğŸ’ª";
        else feedback = "å¾…åŠ å¼· (C) - åˆ¥æ°£é¤’ï¼Œå¤šç·´ç¿’å¹¾æ¬¡ï¼ğŸ“š";
        
        document.getElementById('result-feedback').innerText = `ç­”å° ${score} / ${total} é¡Œ\n${feedback}`;
    }

    function retryQuiz() {
        startQuiz(currentSubject);
    }

    function goHome() {
        showScreen('home');
    }
</script>

</body>
</html>